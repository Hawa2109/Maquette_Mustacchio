<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Maquette_Mustacchio</title>
    <!-- Lien bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Lien icones bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <!-- Lien CSS -->
    <link rel="stylesheet" href="./CSS/style.css" />
  </head>
  <body>
    <!-- L'entête -->
    <header class="d-flex flex-column align-items-center">
      <div class="mb-5">
        <img
          src="/images/logo.jpg"
          alt="Logo du site"
          class="mx-auto d-block"
        />
      </div>
      <nav class="navbar navbar-expand-lg bg-white w-100">
        <div class="container-fluid justify-content-center">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0 text-uppercase">
              <li class="nav-item">
                <a class="nav-lien nav-link text-black" href="index.html"
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-lien nav-link text-black" href="about.html"
                  >About</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-lien nav-link text-black" href="gallery.html"
                  >Gallery</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-lien nav-link text-black" href="contact.html"
                  >Contact</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <section class="container">
        <div class="bg-black text-white text-center p-3">
          <h1
            class="text-uppercase fs-4"
            style="font-family: 'poller one', cursive"
          >
            Let's keep in touch
          </h1>
        </div>
      </section>
      <div class="container mt-4 w-75">
        <form action="">
          <div
            id="messageValidation"
            class="success-message text-center mb-3 d-none"
          >
            Votre message a été envoyé.
          </div>

          <div class="mb-4">
            <label for="name" class="m-2 d-none label-error">name</label>
            <input
              type="text"
              id="name"
              class="form-control border border-black"
              name="name"
              placeholder="NAME"
              style="text-align: center"
            />
          </div>
          <div class="mb-4">
            <label for="text" class="m-2 d-none label-error">address</label>
            <input
              type="text"
              id="text"
              class="form-control border border-black"
              name="address"
              placeholder="ADDRESS"
              style="text-align: center"
            />
          </div>
          <div class="mb-4">
            <label for="email" class="m-2 d-none label-error">email</label>
            <input
              type="email"
              id="email"
              class="form-control border border-black"
              name="email"
              placeholder="EMAIL"
              style="text-align: center"
            />
          </div>
          <div class="mb-4">
            <label for="tel" class="m-2 d-none label-error">phone</label>
            <input
              type="tel"
              id="tel"
              class="form-control border border-black"
              name="tel"
              placeholder="PHONE NUMBER"
              style="text-align: center"
            />
          </div>
          <div class="mb-4">
            <label for="textarea" class="m-2 d-none label-error">message</label>
            <textarea
              name="textarea"
              id="textarea"
              class="text-area form-control border border-black"
              placeholder="MESSAGE"
              style="text-align: center"
            ></textarea>
          </div>
          <div class="text-center p-3">
            <button type="submit" class="btn btn-dark border-0 rounded-0 p-3 fw-bold">
              Send
            </button>
          </div>
        </form>
      </div>
    </main>

    <footer>
      <section class="bg-dark text-white p-5">
        <div class="container d-flex justify-content-between w-75">
          <div class="copy">
            <p class="text-center">
              &copy; 2024 by Mustacchio. All rights reserved.
            </p>
          </div>
          <div class="icones">
            <a
              href="https://x.com/?lang=fr"
              target="_blank"
              rel="noopener"
              title="Twitter"
              ><i
                class="bi bi-twitter p-3 border border-white fs-5 border border-3 me-3"
              ></i
            ></a>
            <a href="https://www.facebook.com/" target="_blank"
              ><i
                class="bi bi-facebook p-3 border border-white fs-5 border border-3 me-3"
              ></i
            ></a>
            <a href="https://www.google.fr/" target="_blank"
              ><i
                class="bi bi-google p-3 border border-white fs-5 border border-3 me-3"
              ></i
            ></a>
            <a href="https://fr.pinterest.com/" target="_blank"
              ><i
                class="bi bi-pinterest p-3 border border-white fs-5 border border-3"
              ></i
            ></a>
          </div>
        </div>
      </section>
    </footer>

    <!-- Liens bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <!-- Lien SCRIPT -->
    <script src="JS/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // On récupére notre formulaire
        let form = document.querySelector("form");
        //   On récupère les champs du formulaire
        let nameInput = document.getElementById("name");
        let emailInput = document.getElementById("email");
        let phoneInput = document.getElementById("tel");
        let messageInput = document.getElementById("textarea");
        let successMessage = document.getElementById("messageValidation");

        // On récupère les labels correspondants
        let nameLabel = document.querySelector("label[for='name']");
        let emailLabel = document.querySelector("label[for='email']");
        let phoneLabel = document.querySelector("label[for='tel']");
        let messageLabel = document.querySelector("label[for='textarea']");

        //########################### Création d'un conteneur pour accueillir TOUTES les divs d'erreur ######################
        let globalErrorContainer = document.createElement("div");
        // On l'insère juste au-dessus du champ "Name"
        nameInput.parentElement.insertBefore(globalErrorContainer, nameInput);

        // On ajout un ecouteur d'événement sur le formulaire
        form.addEventListener("submit", function (event) {
          event.preventDefault();

          // On vide le conteneur d'erreurs à chaque submit
          globalErrorContainer.innerHTML = "";

          // On réinitialise les classes des labels
          nameLabel.classList.remove("label-error");
          emailLabel.classList.remove("label-error");
          phoneLabel.classList.remove("label-error");
          messageLabel.classList.remove("label-error");

          let isValid = true;

          // --------------------------------------------------- Vérification du champ Name -------------------------------
          let nameValue = nameInput.value.trim();
          if (!/^[A-Za-zÀ-ÖØ-öø-ÿ\s-]{2,}$/.test(nameValue)) {
            let errorDiv = document.createElement("div");
            errorDiv.classList.add(
              "text-danger",
              "bg-danger-subtle",
              "text-center",
              "p-2",
              "mt-2"
            );
            errorDiv.textContent = "Verifier votre nom.";
            globalErrorContainer.appendChild(errorDiv);
            nameLabel.classList.add("label-error");
            isValid = false;
          }

          // --------------------------------------------- Vérification de l'email ----------------------------
          let emailValue = emailInput.value.trim();
          let emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(emailValue)) {
            let errorDiv = document.createElement("div");
            errorDiv.classList.add(
              "text-danger",
              "bg-danger-subtle",
              "text-center",
              "p-2",
              "mt-2"
            );
            errorDiv.textContent = "Vérifier votre email.";
            globalErrorContainer.appendChild(errorDiv);
            emailLabel.classList.add("label-error");
            isValid = false;
          }

          // ---------------------------------- Vérification du numéro de téléphone --------------
          let phoneValue = phoneInput.value.trim();
          //  10 chiffres consécutifs
          if (!/^\d{10}$/.test(phoneValue)) {
            let errorDiv = document.createElement("div");
            errorDiv.classList.add(
              "text-danger",
              "bg-danger-subtle",
              "text-center",
              "p-2",
              "mt-2"
            );
            errorDiv.textContent = "Vérifier votre numero de téléphone.";
            globalErrorContainer.appendChild(errorDiv);
            phoneLabel.classList.add("label-error");
            isValid = false;
          }

          // ------------------ Vérification du message (textarea) ----------------------
          let messageValue = messageInput.value.trim();
          // On veut minimum 20 caractères et pas que des chiffres
          if (messageValue.length < 15) {
            let errorDiv = document.createElement("div");
            errorDiv.classList.add(
              "text-danger",
              "bg-danger-subtle",
              "text-center",
              "p-2",
              "mt-2"
            );
            errorDiv.textContent = "Vérifier votre message.";
            globalErrorContainer.appendChild(errorDiv);
            messageLabel.classList.add("label-error");
            isValid = false;
          }

          // #################  Affichage du message de succès ou erreurs ###################
          if (!isValid) {
            // On a déjà inséré les divs d'erreur au-dessus
            successMessage.classList.add("d-none");
          } else {
            // On cache les erreurs, on affiche le succès
            globalErrorContainer.innerHTML = "";
            successMessage.classList.remove("d-none");
            form.reset();
          }
        });
      });
    </script>
  </body>
</html>
